# E-Waste Management Application

Making E-Waste recycling fun!

# Database Schema

The prototyped schema in JSON:

```
// ewaste_user
 
[
  '{{repeat(2, 1)}}',
  {
    _id: '{{objectId()}}',
    _index: '{{index()}}',
    guid: '{{guid()}}',
    isActive: '{{bool()}}',
    age: '{{integer(20, 40)}}',
    gender: '{{gender()}}',
    name: '{{firstName()}} {{surname()}}',
    company: '{{company().toUpperCase()}}',
    _role: function (tags) {
      var _role = ['donor', 'volunteer', 'recycler', 'admin'];
      return _role[tags.integer(0, _role.length - 1)];
    },
    email: '{{email()}}',
    phone: '+1 {{phone()}}',
    address: '{{integer(100, 999)}} {{street()}}',
    city: '{{city()}}',
    postcode: '{{integer(10000,99999)}}',
    state: '{{state()}}',
    registered: '{{date(new Date(2014, 0, 1), new Date(), "YYYY-MM-ddThh:mm:ss Z")}}',
    latitude: '{{floating(-90.000001, 90)}}',
    longitude: '{{floating(-180.000001, 180)}}'
  }
]

//ewaste_trx
 
[
  '{{repeat(2, 1)}}',
  {
    _id: '{{objectId()}}',
    donor_id: '{{index()}}',
    volunteer_id: '{{index()}}',
    recycler_id: '{{index()}}',
    weight: '{{floating(0.5, 10)}}',
    trx_date: '{{date(new Date(2014, 0, 1), new Date(), "YYYY-MM-ddThh:mm:ss Z")}}',
    status: function (tags) {
      var _role = ['available', 'requested', 'collected'];
      return _role[tags.integer(0, _role.length - 1)];
    }
  }
]  

// ewaste_promo
[
  '{{repeat(5, 1)}}',
  {
    _id: '{{objectId()}}',
    volunteer_id: '{{index()}}',
    promotion_text: '{{guid()}}',
    start_date: '{{date(new Date(2014, 0, 1), new Date(), "YYYY-MM-ddThh:mm:ss Z")}}',
    expiry_date: '{{date(new Date(2014, 0, 1), new Date(), "YYYY-MM-ddThh:mm:ss Z")}}',
    status: '{{bool()}}'
  }
] 


```

## DDL

```
-- ewaste_user
create table ewaste_user
(
   _id int AUTO_INCREMENT,
   _index int,
   guid varchar(255),
   isactive boolean,
   age int,
   gender varchar(255),
   name varchar(255),
   company varchar(255),
   _role varchar(255),
   email varchar(255),
   phone varchar(255),
   address varchar(255),
   city varchar(255),
   postcode int,
   state varchar(255),
   registered timestamp,
   latitude varchar(255),
   longitude varchar(255),
   primary key(_id)
)

-- ewaste_trx
create table ewaste_trx
(
   _id int AUTO_INCREMENT, -- transaction
   donor_id int,
   volunteer_id int,
   recycler_id int, -- updated when recyler requested
   weight double,
   trx_date timestamp, 
   status varchar(255), --A: available, R: Requested , C: Collected
   primary key(_id) 
)

-- ewaste_promo
create table ewaste_promo
(
   _id int AUTO_INCREMENT,
   volunteer_id int, 
   promotion_text varchar(255), 
   start_date date,
   expiry_date date, 
   status boolean, 
   primary key(_id) 
)
```

## JDBC URL

jdbc:mysql://bluemix-sandbox-dal-9-portal.5.dblayer.com:23310/compose

# API

API calls to Watson AlchemyData News to drive data in Awareness page

Counts Query:

https://access.alchemyapi.com/calls/data/GetNews?apikey=APIKEY&start=now-7d&end=now&q.enriched.url.cleanedTitle=e-waste&count=1&outputMode=json&timeSlice=1d

```
{
    "status": "OK",
    "usage": "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
    "totalTransactions": "199",
    "result": {
        "count": 16,
        "slices": [
            3,
            1,
            2,
            1,
            2,
            3,
            4,
            0
        ],
        "status": "OK"
    }
}
```

Articles Query:

https://access.alchemyapi.com/calls/data/GetNews?apikey=APIKEY&return=enriched.url.title,enriched.url.url,enriched.url.enrichedTitle.docSentiment&start=now-7d&end=now&q.enriched.url.cleanedTitle=e-waste&count=5&outputMode=json

```
{
    "status": "OK",
    "usage": "By accessing AlchemyAPI or using information generated by AlchemyAPI, you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
    "totalTransactions": "171",
    "result": {
        "docs": [
            {
                "id": "MjY5MTQ2ODQ2MXwxNDg3ODcwOTEz",
                "source": {
                    "enriched": {
                        "url": {
                            "enrichedTitle": {
                                "docSentiment": {
                                    "mixed": 0,
                                    "score": 0,
                                    "type": "neutral"
                                }
                            },
                            "title": "Surprise! ‘True Love Waits’ Is Scientifically Radiohead’s Most Depressing Song",
                            "url": "http://www.msn.com/en-us/music/news/surprise-%E2%80%98true-love-waits%E2%80%99-is-scientifically-radiohead%E2%80%99s-most-depressing-song/ar-AAngcbu"
                        }
                    }
                },
                "timestamp": 1487870913
            }
        ],
        "next": "MTcxOTM1MTgyMzUxNTI5MzYwNXx8MjIzMTk0NjYwMDY2MjI5MjU5Nnx8MzQ3ODE0NTQ1MzMwMjkzNDYxMXx8ODc4ODQ3NDY0MTI4NTExNTI3Mnx8MTM0OTIxOTA0NzY3OTE2NzAxOTF8fDE0NTU1MzMwNTIwMDExOTAzNDU3fHwxNzI5NjgyMzk4OTY1ODY1NTU0N3xNalk1TVRRMk9EUTJNWHd4TkRnM09EY3dPVEV6",
        "status": "OK"
    }
}
```
